<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="description"
        content="Discover the perfect destination for your next adventure with our travel planner. Create personalized itineraries, find the best accommodations, and make unforgettable memories. Start planning today!">
        <link rel="stylesheet" href="/app/assets/styles/styles.css">
    <title>Map</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.3/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.3/dist/leaflet.js"></script>
<script src="https://api.mqcdn.com/sdk/leaflet/v2.2.0/mq-map.js"></script>
<script src="/app/assets/scripts/modules/maps.js"></script>

</head>

<body style="background-color: white;">
    <nav class="navigation">
        <section class="navigation__img"><a href="/"><img src="app/assets/images/image-removebg-preview.png" alt=""
            style="width: 10rem;"></a></section>
        <ul class="navigation__items">
            <li><a class="current" href="">Home</a></li>
            <li><a href="map">Explore</a></li>
            <li><a href="services">Services</a></li>
            <li class="dropdown"><a href="login">Login</a></li>
            <ul class="dropdown-content">
                <li><a href="account">Profile</a></li>
                <li><a href="login">Sign In</a></li>
                <li><a href="register">Sign Up</a></li>
                <li>Sign Out</li>
            </ul>
        </ul>
        <div class="hamburger-menu">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
    </nav>

    <main style="margin-top: 100px;">
        <h1>Selected location</h1>
        <div id="selectedItems" class="card"></div>
        <button onclick="removeAll()">Remove All</button>
        <script>
            class Info {
                constructor(card, showRemoveButton) {   
                    this.img = card.img;
                    this.title = card.title;
                    this.body = card.body;
                    this.link = card.link;
                    this.long = card.long;
                    this.lat = card.lat;
                    this.showRemoveButton = showRemoveButton;
                }

                render() {
                    return `
                        <div class="card__image" style="background-image: url(${this.img});">
                            <div class="card__image__details">
                                <p class="text__title">${this.title}</p>
                                <p class="text__body">${this.body}</p>
                            </div>
                            ${this.showRemoveButton ? `<button class="card__image__button" style="background-color: red;" onclick="removeItem('${this.title}')">Remove from List</button>` : ''}
                        </div>
                    `;
                }
            }

            function displaySelectedItems() {
                const selectedItems = JSON.parse(localStorage.getItem('selectedItems')) || [];
                const selectedItemsContainer = document.getElementById('selectedItems');

                selectedItemsContainer.innerHTML = '';
                const uniqueTitles = new Set();
                for (const item of selectedItems) {
                    if (!uniqueTitles.has(item.title)) {
                        const itemContainer = document.createElement('div');
                        itemContainer.classList.add('selected-item');

                        const prod = new Info(item, true);
                        itemContainer.innerHTML = prod.render();
                        selectedItemsContainer.appendChild(itemContainer);
                        uniqueTitles.add(item.title);
                    }
                }
            }

            function removeAll() {
                localStorage.removeItem('selectedItems');
                displaySelectedItems();
            }

            function removeItem(title) {
                const selectedItems = JSON.parse(localStorage.getItem('selectedItems')) || [];
                const updatedItems = selectedItems.filter((item) => item.title !== title);

                localStorage.setItem('selectedItems', JSON.stringify(updatedItems));
                displaySelectedItems();
            }

            displaySelectedItems();
        </script>
    </main>
    <div id="map" style="height: 400px; margin: 30px;" ></div>

    <footer>
        <div class="footer">
            <div class="footer__one">
                <h3>Санал хүсэлт үлдээх хэсэг</h3><input class="input" type="email" name="email"
                    placeholder="Enter your email"> <textarea name="textarea" class="textarea" cols="30" rows="10"
                    placeholder="Enter your comment"></textarea><br><button type="submit">submit</button>
            </div>
            <div class="footer__two">
                <h3>About Us</h3>
                <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas voluptas dolorum vitae neque, a
                    nesciunt, consectetur voluptatibus nemo, earum esse mollitia debitis tempora! Adipisci blanditiis,
                    ut vitae quasi iusto nobis.</p>
            </div>
            <div class="footer__three">
                <h3>Contact Us</h3>
                <p>976 9999 9999</p>
                <p>nomail.com</p>
            </div>
        </div>
        <p class="footer__end">&copy; 2023 copyright</p>
    </footer>
    <script src="app/bundled.js"></script>
</body>

</html>